<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Product App</title>
    <style>
        #ordersCntr li {
            float:left;
            list-style: none;
        }
        #productsCntr, #ordersCntr {
            float:left;
            margin-right: 100px;
            border-left: 2px solid white;
        }
    </style>
</head>
<body>
    <div id="productsCntr">
        <div>
            <h2>All Products</h2>
            <ul id="products" />
        </div>
        <div>
            <h2>Search by ID</h2>
            <input type="text" id="prodId" size="5" />
            <input type="button" value="Search" onclick="find();" />
            <p id="product" />
        </div>
    </div>

    <div id="ordersCntr" style="float:left;">
        <div>
            <h2>All Orders</h2>
            <ul id="orders" />
        </div>
        <div>
            <h2>Search by OrderID or SourceOrderID</h2>
            <input type="text" id="orderID" size="5" />
            <input type="button" value="Search" onclick="findOrder();" />
            <ul id="order" />
        </div>
    </div>
    

    <script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-2.0.3.min.js"></script>
    <script>
        var uri = 'api/products', ordersUri = "api/orders";

    $(document).ready(function () {
      // Send an AJAX request
      $.getJSON(uri)
          .done(function (data) {
            // On success, 'data' contains a list of products.
            $.each(data, function (key, item) {
              // Add a list item for the product.
                $('<li>', { text: formatItem(item) }).appendTo($('#products'));
            });
          });

        $.getJSON(ordersUri)
        .done(function (data) {
            // On success, 'data' contains a list of products.
            $.each(data, function (key, item) {
                // Add a list item for the product.
                //$('<li>', { text: formatOrderItem(item) }).appendTo($('#orders'));
                $('<li><img src="' + item.Image + '" title="' + item.SKU_Desc + '"/></li>').appendTo($('#orders'));
            });
        });
    });

    function formatItem(item) {
      return item.Name + ': $' + item.Price;
    }

    function formatOrderItem(item) {
        return item.SKU + ': ' + item.SKU_Desc;
    }

    function find() {
      var id = $('#prodId').val();
      $.getJSON(uri + '/' + id)
          .done(function (data) {
            $('#product').text(formatItem(data));
          })
          .fail(function (jqXHR, textStatus, err) {
            $('#product').text('Error: ' + err);
          });
    }

    function findOrder() {
        var id = $('#orderID').val();
        $.getJSON(ordersUri + '/' + id)
            .done(function (data) {
                $('#order').empty();
                // On success, 'data' contains a list of products.
                $.each(data, function (key, item) {
                    // Add a list item for the product.
                    //$('<li>', { text: formatOrderItem(item) }).appendTo($('#order'));
                    $('<li><img src="' + item.Image + '" title="' + item.SKU_Desc + '"/></li>').appendTo($('#order'));
                });
            })
            .fail(function (jqXHR, textStatus, err) {
                $('#order').text('Error: ' + err);
            });
    }
    </script>
</body>
</html>